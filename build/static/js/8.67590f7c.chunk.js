"use strict";(self.webpackChunkrecetapp=self.webpackChunkrecetapp||[]).push([[8],{6018:(e,r,t)=>{t.d(r,{Z:()=>a});t(2791);var o=t(4270),i=t(184);const a=e=>{let{title:r,description:t,children:a}=e;return(0,i.jsxs)("div",{className:"mainApp",children:[(0,i.jsxs)(o.q,{children:[(0,i.jsx)("title",{children:r}),(0,i.jsx)("meta",{name:"description",content:t})]}),a]})}},5008:(e,r,t)=>{t.r(r),t.d(r,{default:()=>C});var o=t(2791),i=t(5294),a=(t(3508),t(6018)),n=t(7689),s=t(9836),c=t(3382),l=t(3994),d=t(9281),m=t(6890),h=t(5855),u=t(5527),x=t(890),p=t(1889),g=t(8165),j=t(4294),Z=t(1087),b=t(260),v=t(938),f=t(3543),k=t(4070),y=t(184);const B="http://localhost:3000";const C=function(){const[e,r]=(0,o.useState)([]),{id:t}=(0,n.UO)(),[C,S]=(0,o.useState)(""),[_,w]=(0,o.useState)(""),[E,P]=(0,o.useState)(!1),[T,I]=(0,o.useState)({usuario_id:"",correo:""}),[L,R]=(0,o.useState)([]);(0,o.useEffect)((()=>{const e=sessionStorage.getItem("token");i.Z.post("".concat(B,"/api/obtenerUsuario"),{token:e}).then((e=>{console.log(e.data);const{usuario_id:r,correo:t}=e.data;I({usuario_id:r,correo:t})})).catch((e=>{console.error("Error:",e)}))}),[]);const U=(e,r)=>{"clickaway"!==r&&P(!1)},V=r=>{r.preventDefault();sessionStorage.getItem("token")||P(!0);const t={Receta_id:e._id,usuario:{usuario_id:T.usuario_id,correo:T.correo},comentario:C,puntuacion:_};i.Z.post("".concat(B,"/api/crearValoracion"),t,{}).then((e=>{console.log("valoracion creada",e.data),R(e.data)})).catch((e=>{console.error("Error:",e)}))};let D=[];return L&&L.valoraciones&&(D=L.valoraciones.map(((e,r)=>({id:r,comentario:e.comentario,puntuacion:e.puntuacion,correo:e.usuario.correo})))),(0,o.useEffect)((()=>{const e={receta_id:t};i.Z.post("".concat(B,"/api/filtrarId"),e).then((e=>{r(e.data)})).catch((e=>{console.error("Error:",e)}))}),[]),(0,y.jsx)(a.Z,{title:"Vista Recetas",description:"aaaaaaaaaaaaaaaaa",children:(0,y.jsxs)("div",{className:"receta-container",children:[(0,y.jsx)(f.Z,{open:E,autoHideDuration:6e3,onClose:U,children:(0,y.jsx)(k.Z,{onClose:U,severity:"error",sx:{width:"100%"},children:"Debes estar autenticado para enviar un comentario."})}),(0,y.jsx)(Z.rU,{to:"/Recetas",style:{marginLeft:10,marginTop:10},children:(0,y.jsxs)(j.Z,{variant:"contained",color:"primary",sx:{backgroundColor:"grey"},children:[(0,y.jsx)(b.Z,{})," Volver"]})}),(0,y.jsx)(p.ZP,{container:!0,spacing:2,children:e&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(p.ZP,{sx:{marginTop:3,marginLeft:4},item:!0,xs:12,sm:6,md:5,children:[(0,y.jsx)("img",{src:e.imagen,alt:e.titulo,style:{width:"100%",marginBottom:20}}),(0,y.jsx)(x.Z,{variant:"h6",gutterBottom:!0,children:e.descripcion}),(0,y.jsxs)(u.Z,{sx:{padding:1,marginBottom:2,border:"1px solid black"},children:[(0,y.jsx)(x.Z,{variant:"h6",gutterBottom:!0,style:{borderBottom:"1px solid black",padding:4},children:"Ingredientes"}),e.ingredientes&&(0,y.jsx)("ul",{children:e.ingredientes.map(((e,r)=>(0,y.jsx)("li",{children:e.nombre},r)))}),(0,y.jsx)(x.Z,{variant:"h6",gutterBottom:!0,style:{borderBottom:"1px solid black",padding:4},children:"Utensilios"}),e.utensilios&&(0,y.jsx)("ul",{children:e.utensilios.map(((e,r)=>(0,y.jsx)("li",{children:e.nombre},r)))})]})]}),(0,y.jsxs)(p.ZP,{sx:{marginTop:3,textAlign:"justify",marginRight:2},item:!0,xs:12,sm:6,md:5,children:[(0,y.jsx)(x.Z,{variant:"h4",gutterBottom:!0,style:{borderBottom:"2px solid black"},children:e.titulo}),(0,y.jsxs)(u.Z,{sx:{padding:2,marginBottom:2,border:"1px solid black"},children:[(0,y.jsx)(x.Z,{variant:"h6",gutterBottom:!0,style:{borderBottom:"1px solid black",padding:4},children:"Preparacion"}),e.procedimientos&&(0,y.jsx)("ol",{children:e.procedimientos.map(((e,r)=>(0,y.jsx)("li",{children:e.instruccion},r)))})]}),(0,y.jsx)(u.Z,{sx:{padding:2,marginBottom:2,border:"1px solid black"},children:(0,y.jsxs)("form",{onSubmit:V,children:[(0,y.jsx)(g.Z,{fullWidth:!0,label:"Comentario",id:"fullWidth",value:C,onChange:e=>{S(e.target.value)}}),(0,y.jsx)(v.Z,{name:"simple-controlled",value:_,onChange:(e,r)=>{w(r)}}),(0,y.jsx)(j.Z,{variant:"contained",color:"primary",sx:{backgroundColor:"grey",marginTop:1,marginLeft:1},type:"submit",children:"Comentar"})]})}),(0,y.jsx)("form",{onSubmit:V,children:(0,y.jsx)(j.Z,{variant:"contained",color:"primary",sx:{backgroundColor:"grey",marginTop:1,marginLeft:1},type:"submit",children:"Ver valoraciones"})})]})]})}),(0,y.jsx)(d.Z,{component:u.Z,sx:{marginBottom:1,padding:1},children:(0,y.jsxs)(s.Z,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,y.jsx)(m.Z,{children:(0,y.jsxs)(h.Z,{children:[(0,y.jsx)(l.Z,{children:"Comentario"}),(0,y.jsx)(l.Z,{align:"right",children:"Puntuaci\xf3n"}),(0,y.jsx)(l.Z,{align:"right",children:"Correo"})]})}),(0,y.jsx)(c.Z,{children:D.map((e=>(0,y.jsxs)(h.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,y.jsx)(l.Z,{component:"th",scope:"row",children:e.comentario}),(0,y.jsx)(l.Z,{align:"right",children:e.puntuacion}),(0,y.jsx)(l.Z,{align:"right",children:e.correo})]},e.id)))})]})})]})})}},3508:()=>{}}]);
//# sourceMappingURL=8.67590f7c.chunk.js.map